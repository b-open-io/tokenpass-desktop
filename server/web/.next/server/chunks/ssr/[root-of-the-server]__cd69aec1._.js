module.exports=[56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},24836,(a,b,c)=>{b.exports=a.x("https",()=>require("https"))},52491,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored.contexts.HooksClientContext},60703,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored.contexts.ServerInsertedHtml},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},96746,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored.contexts.AppRouterContext},19933,(a,b,c)=>{"use strict";b.exports=a.r(40881).vendored["react-ssr"].ReactDOM},72115,a=>{"use strict";var b=a.i(56856),c=a.i(32315),d=a.i(55132),e=a.i(96548),f=a.i(39608),g=a.i(58792),h=a.i(76031),i=a.i(80965),j=a.i(38706),k=a.i(78137),l=a.i(79276),m=a.i(69396),n=a.i(13572);function o({host:a,icon:c,scopes:o,returnURL:p}){let[q,r]=(0,d.useState)(""),[s,t]=(0,d.useState)("once"),[u,v]=(0,d.useState)(null),[w,x]=(0,d.useState)(!1),y=async b=>{if(b.preventDefault(),!q)return void v("Please enter your password");x(!0),v(null);let d=await (0,n.authorize)({password:q,host:a,icon:c,scopes:o,expire:s});if(x(!1),d.error)v(d.error),r("");else if(d.success&&d.accessToken){if(window.opener)window.close();else if(p){let a=new URL(p);a.searchParams.set("tokenPass",d.accessToken),window.location.href=a.toString()}}};return(0,b.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,b.jsx)("header",{className:"border-b",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(f.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(f.AvatarImage,{src:(0,n.getSecurityIconUrl)(),alt:"TokenPass"}),(0,b.jsx)(f.AvatarFallback,{children:"TP"})]}),(0,b.jsx)("h1",{className:"text-lg font-semibold",children:"TokenPass"})]}),(0,b.jsx)(e.ModeToggle,{})]})}),(0,b.jsx)("main",{className:"flex-1 flex items-center justify-center p-4",children:(0,b.jsxs)(i.Card,{className:"w-full max-w-md",children:[(0,b.jsxs)(i.CardHeader,{className:"text-center space-y-4",children:[c&&(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)(f.Avatar,{className:"h-20 w-20",children:[(0,b.jsx)(f.AvatarImage,{src:c,alt:a}),(0,b.jsx)(f.AvatarFallback,{children:a.slice(0,2).toUpperCase()})]})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.CardTitle,{children:["Authorize ",a]}),(0,b.jsx)(i.CardDescription,{children:"This site is requesting access to your wallet"})]})]}),(0,b.jsx)(i.CardContent,{children:(0,b.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{htmlFor:"password",children:"Password"}),(0,b.jsx)(j.Input,{id:"password",type:"password",value:q,onChange:a=>r(a.target.value),placeholder:"Enter your password",autoFocus:!0})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-md",children:[(0,b.jsxs)(f.Avatar,{className:"h-6 w-6",children:[(0,b.jsx)(f.AvatarImage,{src:(0,n.getSecurityIconUrl)(),alt:"Security"}),(0,b.jsx)(f.AvatarFallback,{children:"!"})]}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Make sure you recognize this security image"})]}),(0,b.jsx)(m.Separator,{}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(k.Label,{className:"text-muted-foreground",children:"This host would like access to:"}),(0,b.jsx)("div",{className:"p-3 bg-muted rounded-md",children:o.length>0?(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map(a=>(0,b.jsx)(g.Badge,{variant:"secondary",children:a},a))}):(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Authentication only"})})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(k.Label,{children:"Authorization Duration"}),(0,b.jsx)(l.RadioGroup,{value:s,onValueChange:t,children:[{value:"once",label:"Ask Every Time"},{value:"1h",label:"Allow for 1 Hour"},{value:"1d",label:"Allow for 1 Day"},{value:"1m",label:"Allow for 1 Month"},{value:"forever",label:"Allow Forever"}].map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.RadioGroupItem,{value:a.value,id:a.value}),(0,b.jsx)(k.Label,{htmlFor:a.value,className:"font-normal cursor-pointer",children:a.label})]},a.value))})]}),u&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:u}),(0,b.jsx)(h.Button,{type:"submit",className:"w-full",disabled:w,children:w?"Authorizing...":"Allow"})]})})]})})]})}var p=a.i(27442),q=a.i(52132);function r(){let a=(0,c.useSearchParams)(),[e,f]=(0,d.useState)("loading"),g=a.get("host")||"unknown",h=a.get("icon")||void 0,i=a.get("scopes")||"",j=i?i.split(",").filter(Boolean):[],k=a.get("returnURL")||void 0,l=(0,d.useCallback)(async()=>{f("loading");let a=await (0,n.getStatus)();"no_wallet"===a.status?f("no_wallet"):"locked"===a.status?f("locked"):f("ready")},[]);return((0,d.useEffect)(()=>{l()},[l]),"loading"===e)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"animate-pulse",children:(0,b.jsx)("div",{className:"h-16 w-16 mx-auto rounded-full bg-muted"})}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading TokenPass..."})]})}):"no_wallet"===e?(0,b.jsx)(q.Register,{onSuccess:l}):"locked"===e?(0,b.jsx)(p.Login,{onSuccess:l}):(0,b.jsx)(o,{host:g,icon:h,scopes:j,returnURL:k})}function s(){return(0,b.jsx)(d.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"animate-pulse",children:(0,b.jsx)("div",{className:"h-16 w-16 mx-auto rounded-full bg-muted"})}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading TokenPass..."})]})}),children:(0,b.jsx)(r,{})})}a.s(["default",()=>s],72115)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__cd69aec1._.js.map