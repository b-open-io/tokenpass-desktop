module.exports=[12504,a=>{"use strict";var b=a.i(56856),c=a.i(35520);let d=(0,c.default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),e=(0,c.default)("hard-drive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);var f=a.i(2992),g=a.i(50670),h=a.i(46640),i=a.i(32315),j=a.i(25517),k=a.i(55132);let l=(0,c.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var m=a.i(96155),m=m;let n=(0,c.default)("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]),o=(0,c.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),p=(0,c.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),q=(0,c.default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var r=a.i(38174),s=a.i(56033);let t=(0,r.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function u({className:a,variant:c,...d}){return(0,b.jsx)("div",{"data-slot":"alert",role:"alert",className:(0,s.cn)(t({variant:c}),a),...d})}function v({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"alert-description",className:(0,s.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",a),...c})}var w=a.i(58792),x=a.i(76031),y=a.i(80965),z=a.i(38706),A=a.i(78137),B=a.i(13572);function C({onLogout:a}){let[c,d]=(0,k.useState)([]),[e,f]=(0,k.useState)(""),[g,h]=(0,k.useState)(!1),[i,j]=(0,k.useState)(""),[r,s]=(0,k.useState)(""),[t,C]=(0,k.useState)(""),[D,E]=(0,k.useState)(""),[F,G]=(0,k.useState)(null),H=(0,k.useRef)(null),[I,J]=(0,k.useState)(""),[K,L]=(0,k.useState)(""),[M,N]=(0,k.useState)(""),O=(0,k.useCallback)(async()=>{let a=await (0,B.getBackups)();d(a.backups),f(a.currentPath)},[]);(0,k.useEffect)(()=>{O()},[O]);let P=async a=>{h(!0),j("");let b=await (0,B.removeBackup)(a);b.error?j(b.error):(s("Backup removed from list"),await O()),h(!1)},Q=async b=>{h(!0),j("");let c=await (0,B.switchBackup)(b);c.error?j(c.error):(s("Switched to backup. Logging out..."),await O(),setTimeout(()=>{a?.()},1e3)),h(!1)},R=async()=>{if(!F)return void j("Please select a backup file");h(!0),j(""),s("");let a=await F.text(),b=await (0,B.importBackup)(a,t,D);b.error?j(b.error):(s(`Backup imported successfully. BAP ID: ${b.bapId}. ${b.identityCount} identities found.`),G(null),C(""),E(""),H.current&&(H.current.value=""),await O()),h(!1)},S=async()=>{h(!0),j(""),s("");let a=await (0,B.createBackup)(I,K,M);a.error?j(a.error):(s(`New backup created at ${I}. BAP ID: ${a.bapId}`),J(""),L(""),N(""),await O()),h(!1)};return(0,b.jsxs)("div",{className:"space-y-6",children:[i&&(0,b.jsxs)(u,{variant:"destructive",children:[(0,b.jsx)(l,{className:"h-4 w-4"}),(0,b.jsx)(v,{children:i})]}),r&&(0,b.jsxs)(u,{className:"border-green-500/50 bg-green-500/10 text-green-600 dark:text-green-400",children:[(0,b.jsx)(m.default,{className:"h-4 w-4"}),(0,b.jsx)(v,{children:r})]}),(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{children:[(0,b.jsx)(y.CardTitle,{className:"text-base",children:"Current Backup"}),(0,b.jsx)(y.CardDescription,{children:"The backup file currently in use"})]}),(0,b.jsx)(y.CardContent,{children:(0,b.jsx)("div",{className:"p-3 bg-muted rounded-md",children:(0,b.jsx)("code",{className:"text-xs font-mono break-all",children:e})})})]}),(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{children:[(0,b.jsx)(y.CardTitle,{className:"text-base",children:"Known Backups"}),(0,b.jsx)(y.CardDescription,{children:"Manage your backup file locations"})]}),(0,b.jsx)(y.CardContent,{children:0===c.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"No backups configured"}):(0,b.jsx)("div",{className:"space-y-2",children:c.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-md",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[a.label&&(0,b.jsx)("p",{className:"font-medium text-sm",children:a.label}),(0,b.jsx)("code",{className:"text-xs font-mono text-muted-foreground break-all",children:a.path}),(0,b.jsxs)("div",{className:"flex gap-2 mt-1",children:[a.isCurrent&&(0,b.jsx)(w.Badge,{variant:"default",className:"text-xs",children:"Current"}),a.isDiscovered&&(0,b.jsx)(w.Badge,{variant:"secondary",className:"text-xs",children:"Discovered"}),!a.exists&&(0,b.jsx)(w.Badge,{variant:"destructive",className:"text-xs",children:"Missing"})]})]}),(0,b.jsxs)("div",{className:"flex gap-2 ml-4",children:[!a.isCurrent&&a.exists&&(0,b.jsx)(x.Button,{variant:"outline",size:"sm",onClick:()=>Q(a.path),disabled:g,children:"Switch"}),(0,b.jsx)(x.Button,{variant:"ghost",size:"sm",onClick:()=>P(a.path),disabled:g||a.isCurrent,children:(0,b.jsx)(p,{className:"h-4 w-4"})})]})]},a.path))})})]}),(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{children:[(0,b.jsx)(y.CardTitle,{className:"text-base",children:"Import Backup"}),(0,b.jsx)(y.CardDescription,{children:"Import an existing backup file"})]}),(0,b.jsx)(y.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("input",{ref:H,accept:".json,.bep",className:"sr-only",id:"backup-import-file",onChange:a=>{let b=a.target.files?.[0];b&&(G(b),j(""))},type:"file"}),(0,b.jsx)("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${F?"border-green-500 bg-green-500/5":"border-muted-foreground/25 hover:border-muted-foreground/50"}`,children:F?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n,{className:"mx-auto h-10 w-10 text-green-500"}),(0,b.jsx)("p",{className:"font-medium text-sm",children:F.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(F.size/1024).toFixed(1)," KB"]}),(0,b.jsx)(x.Button,{variant:"ghost",size:"sm",onClick:()=>{G(null),H.current&&(H.current.value="")},children:"Clear"})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(q,{className:"mx-auto h-10 w-10 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select a backup file (.json or .bep)"}),(0,b.jsxs)(x.Button,{variant:"outline",size:"sm",onClick:()=>H.current?.click(),disabled:g,children:[(0,b.jsx)(n,{className:"mr-2 h-4 w-4"}),"Select File"]})]})}),F&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"import-password",children:"Password"}),(0,b.jsx)(z.Input,{id:"import-password",placeholder:"Enter backup password",type:"password",value:t,onChange:a=>C(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"import-label",children:"Label (optional)"}),(0,b.jsx)(z.Input,{id:"import-label",placeholder:"e.g., Work Backup",value:D,onChange:a=>E(a.target.value)})]}),(0,b.jsxs)(x.Button,{onClick:R,disabled:!t||g,className:"w-full",children:[(0,b.jsx)(q,{className:"h-4 w-4 mr-2"}),"Import & Unlock"]})]})]})})]}),(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{children:[(0,b.jsx)(y.CardTitle,{className:"text-base",children:"Create New Backup"}),(0,b.jsx)(y.CardDescription,{children:"Create a new backup file at a custom location"})]}),(0,b.jsx)(y.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"create-path",children:"File Path"}),(0,b.jsx)(z.Input,{id:"create-path",placeholder:"/path/to/backup.bep",value:I,onChange:a=>J(a.target.value),className:"font-mono text-xs"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"create-password",children:"Password"}),(0,b.jsx)(z.Input,{id:"create-password",placeholder:"Enter a strong password",type:"password",value:K,onChange:a=>L(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(A.Label,{htmlFor:"create-label",children:"Label (optional)"}),(0,b.jsx)(z.Input,{id:"create-label",placeholder:"e.g., Cloud Backup",value:M,onChange:a=>N(a.target.value)})]}),(0,b.jsxs)(x.Button,{onClick:S,disabled:!I||!K||g,variant:"secondary",className:"w-full",children:[(0,b.jsx)(o,{className:"h-4 w-4 mr-2"}),"Create New Backup"]})]})})]})]})}var D=a.i(39608),E=a.i(79276);function F(){let a=(0,i.useRouter)(),{theme:c,setTheme:l}=(0,j.useTheme)(),[m,n]=(0,k.useState)(null);(0,k.useEffect)(()=>{(0,B.getStatus)().then(b=>{n(b),"unlocked"!==b.status&&a.push("/")})},[a]);let o=async()=>{await (0,B.logout)(),a.push("/")};return m&&"unlocked"===m.status?(0,b.jsxs)("div",{className:"min-h-screen",children:[(0,b.jsx)("header",{className:"border-b",children:(0,b.jsx)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(h.default,{href:"/",children:(0,b.jsxs)(x.Button,{variant:"ghost",size:"sm",children:[(0,b.jsx)(d,{className:"h-4 w-4 mr-2"}),"Back"]})}),(0,b.jsxs)(D.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(D.AvatarImage,{src:(0,B.getSecurityIconUrl)(),alt:"Security Icon"}),(0,b.jsx)(D.AvatarFallback,{children:"TP"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-lg font-semibold",children:"Settings"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Configure TokenPass"})]})]})})}),(0,b.jsx)("main",{className:"container mx-auto px-4 py-8 max-w-2xl",children:(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:["dark"===c?(0,b.jsx)(f.Moon,{className:"h-5 w-5 text-primary"}):(0,b.jsx)(g.Sun,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Appearance"})]}),(0,b.jsxs)(y.Card,{children:[(0,b.jsxs)(y.CardHeader,{children:[(0,b.jsx)(y.CardTitle,{className:"text-base",children:"Theme"}),(0,b.jsx)(y.CardDescription,{children:"Choose your preferred color scheme"})]}),(0,b.jsx)(y.CardContent,{children:(0,b.jsxs)(E.RadioGroup,{value:c||"dark",onValueChange:l,className:"flex gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(E.RadioGroupItem,{value:"light",id:"theme-light"}),(0,b.jsx)(A.Label,{htmlFor:"theme-light",className:"cursor-pointer",children:"Light"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(E.RadioGroupItem,{value:"dark",id:"theme-dark"}),(0,b.jsx)(A.Label,{htmlFor:"theme-dark",className:"cursor-pointer",children:"Dark"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(E.RadioGroupItem,{value:"system",id:"theme-system"}),(0,b.jsx)(A.Label,{htmlFor:"theme-system",className:"cursor-pointer",children:"System"})]})]})})]})]}),(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,b.jsx)(e,{className:"h-5 w-5 text-primary"}),(0,b.jsx)("h2",{className:"text-lg font-semibold",children:"Backup Management"})]}),(0,b.jsx)(C,{onLogout:o})]})]})})]}):(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})})}a.s(["default",()=>F],12504)}];

//# sourceMappingURL=web_src_app_settings_page_tsx_9688af8f._.js.map