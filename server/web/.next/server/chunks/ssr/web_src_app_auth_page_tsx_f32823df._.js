module.exports=[72115,a=>{"use strict";var b=a.i(56856),c=a.i(32315),d=a.i(55132),e=a.i(63748),f=a.i(96548),g=a.i(39608),h=a.i(58792),i=a.i(76031),j=a.i(80965),k=a.i(38706),l=a.i(78137),m=a.i(79276),n=a.i(69396),o=a.i(13572);function p({host:a,icon:c,scopes:e,returnURL:p,selectedIdentityKey:q}){let[r,s]=(0,d.useState)(""),[t,u]=(0,d.useState)("once"),[v,w]=(0,d.useState)(null),[x,y]=(0,d.useState)(!1),z=async b=>{if(b.preventDefault(),!r)return void w("Please enter your password");y(!0),w(null);let d=await (0,o.authorize)({password:r,host:a,icon:c,scopes:e,expire:t,identityKey:q||void 0});if(y(!1),d.error)w(d.error),s("");else if(d.success&&d.accessToken){if(window.opener)window.close();else if(p){let a=new URL(p);a.searchParams.set("tokenPass",d.accessToken),window.location.href=a.toString()}}};return(0,b.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,b.jsx)("header",{className:"border-b",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(g.Avatar,{className:"h-8 w-8",children:[(0,b.jsx)(g.AvatarImage,{src:(0,o.getSecurityIconUrl)(),alt:"TokenPass"}),(0,b.jsx)(g.AvatarFallback,{children:"TP"})]}),(0,b.jsx)("h1",{className:"text-lg font-semibold",children:"TokenPass"})]}),(0,b.jsx)(f.ModeToggle,{})]})}),(0,b.jsx)("main",{className:"flex-1 flex items-center justify-center p-4",children:(0,b.jsxs)(j.Card,{className:"w-full max-w-md",children:[(0,b.jsxs)(j.CardHeader,{className:"text-center space-y-4",children:[c&&(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsxs)(g.Avatar,{className:"h-20 w-20",children:[(0,b.jsx)(g.AvatarImage,{src:c,alt:a}),(0,b.jsx)(g.AvatarFallback,{children:a.slice(0,2).toUpperCase()})]})}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(j.CardTitle,{children:["Authorize ",a]}),(0,b.jsx)(j.CardDescription,{children:"This site is requesting access to your wallet"})]})]}),(0,b.jsx)(j.CardContent,{children:(0,b.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{htmlFor:"password",children:"Password"}),(0,b.jsx)(k.Input,{id:"password",type:"password",value:r,onChange:a=>s(a.target.value),placeholder:"Enter your password",autoFocus:!0})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-md",children:[(0,b.jsxs)(g.Avatar,{className:"h-6 w-6",children:[(0,b.jsx)(g.AvatarImage,{src:(0,o.getSecurityIconUrl)(),alt:"Security"}),(0,b.jsx)(g.AvatarFallback,{children:"!"})]}),(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"Make sure you recognize this security image"})]}),(0,b.jsx)(n.Separator,{}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(l.Label,{className:"text-muted-foreground",children:"This host would like access to:"}),(0,b.jsx)("div",{className:"p-3 bg-muted rounded-md",children:e.length>0?(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:e.map(a=>(0,b.jsx)(h.Badge,{variant:"secondary",children:a},a))}):(0,b.jsx)("span",{className:"text-sm text-muted-foreground",children:"Authentication only"})})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(l.Label,{children:"Authorization Duration"}),(0,b.jsx)(m.RadioGroup,{value:t,onValueChange:u,children:[{value:"once",label:"Ask Every Time"},{value:"1h",label:"Allow for 1 Hour"},{value:"1d",label:"Allow for 1 Day"},{value:"1m",label:"Allow for 1 Month"},{value:"forever",label:"Allow Forever"}].map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(m.RadioGroupItem,{value:a.value,id:a.value}),(0,b.jsx)(l.Label,{htmlFor:a.value,className:"font-normal cursor-pointer",children:a.label})]},a.value))})]}),v&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:v}),(0,b.jsx)(i.Button,{type:"submit",className:"w-full",disabled:x,children:x?"Authorizing...":"Allow"})]})})]})})]})}var q=a.i(27442),r=a.i(52132),s=a.i(95041),t=a.i(16454),u=a.i(35520);let v=(0,u.default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function w(a,c=[]){let e=[],f=()=>{let b=e.map(a=>d.createContext(a));return function(c){let e=c?.[a]||b;return d.useMemo(()=>({[`__scope${a}`]:{...c,[a]:e}}),[c,e])}};return f.scopeName=a,[function(c,f){let g=d.createContext(f),h=e.length;e=[...e,f];let i=c=>{let{scope:e,children:f,...i}=c,j=e?.[a]?.[h]||g,k=d.useMemo(()=>i,Object.values(i));return(0,b.jsx)(j.Provider,{value:k,children:f})};return i.displayName=c+"Provider",[i,function(b,e){let i=e?.[a]?.[h]||g,j=d.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${b}\` must be used within \`${c}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let c=()=>{let c=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=c.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return d.useMemo(()=>({[`__scope${b.scopeName}`]:e}),[e])}};return c.scopeName=b.scopeName,c}(f,...c)]}var x=a.i(80416),y=a.i(81914),z=a.i(79847),A=a.i(17435);a.i(19933);var B=Symbol("radix.slottable");function C(a){return d.isValidElement(a)&&"function"==typeof a.type&&"__radixId"in a.type&&a.type.__radixId===B}var D=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((a,c)=>{var e,f;let g,h,i,j=(f=e=`Primitive.${c}`,(g=d.forwardRef((a,b)=>{let{children:c,...e}=a;if(d.isValidElement(c)){var f;let a,g,h=(f=c,(g=(a=Object.getOwnPropertyDescriptor(f.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.ref:(g=(a=Object.getOwnPropertyDescriptor(f,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?f.props.ref:f.props.ref||f.ref),i=function(a,b){let c={...b};for(let d in b){let e=a[d],f=b[d];/^on[A-Z]/.test(d)?e&&f?c[d]=(...a)=>{let b=f(...a);return e(...a),b}:e&&(c[d]=e):"style"===d?c[d]={...e,...f}:"className"===d&&(c[d]=[e,f].filter(Boolean).join(" "))}return{...a,...c}}(e,c.props);return c.type!==d.Fragment&&(i.ref=b?(0,y.composeRefs)(b,h):h),d.cloneElement(c,i)}return d.Children.count(c)>1?d.Children.only(null):null})).displayName=`${f}.SlotClone`,h=g,(i=d.forwardRef((a,c)=>{let{children:e,...f}=a,g=d.Children.toArray(e),i=g.find(C);if(i){let a=i.props.children,e=g.map(b=>b!==i?b:d.Children.count(a)>1?d.Children.only(null):d.isValidElement(a)?a.props.children:null);return(0,b.jsx)(h,{...f,ref:c,children:d.isValidElement(a)?d.cloneElement(a,void 0,e):null})}return(0,b.jsx)(h,{...f,ref:c,children:e})})).displayName=`${e}.Slot`,i),k=d.forwardRef((a,d)=>{let{asChild:e,...f}=a;return(0,b.jsx)(e?j:c,{...f,ref:d})});return k.displayName=`Primitive.${c}`,{...a,[c]:k}},{}),E=a.i(44314),F=a.i(63954),G=a.i(20509),H="Collapsible",[I,J]=w(H),[K,L]=I(H),M=d.forwardRef((a,c)=>{let{__scopeCollapsible:e,open:f,defaultOpen:g,disabled:h,onOpenChange:i,...j}=a,[k,l]=(0,A.useControllableState)({prop:f,defaultProp:g??!1,onChange:i,caller:H});return(0,b.jsx)(K,{scope:e,disabled:h,contentId:(0,G.useId)(),open:k,onOpenToggle:d.useCallback(()=>l(a=>!a),[l]),children:(0,b.jsx)(D.div,{"data-state":S(k),"data-disabled":h?"":void 0,...j,ref:c})})});M.displayName=H;var N="CollapsibleTrigger",O=d.forwardRef((a,c)=>{let{__scopeCollapsible:d,...e}=a,f=L(N,d);return(0,b.jsx)(D.button,{type:"button","aria-controls":f.contentId,"aria-expanded":f.open||!1,"data-state":S(f.open),"data-disabled":f.disabled?"":void 0,disabled:f.disabled,...e,ref:c,onClick:(0,z.composeEventHandlers)(a.onClick,f.onOpenToggle)})});O.displayName=N;var P="CollapsibleContent",Q=d.forwardRef((a,c)=>{let{forceMount:d,...e}=a,f=L(P,a.__scopeCollapsible);return(0,b.jsx)(F.Presence,{present:d||f.open,children:({present:a})=>(0,b.jsx)(R,{...e,ref:c,present:a})})});Q.displayName=P;var R=d.forwardRef((a,c)=>{let{__scopeCollapsible:e,present:f,children:g,...h}=a,i=L(P,e),[j,k]=d.useState(f),l=d.useRef(null),m=(0,y.useComposedRefs)(c,l),n=d.useRef(0),o=n.current,p=d.useRef(0),q=p.current,r=i.open||j,s=d.useRef(r),t=d.useRef(void 0);return d.useEffect(()=>{let a=requestAnimationFrame(()=>s.current=!1);return()=>cancelAnimationFrame(a)},[]),(0,E.useLayoutEffect)(()=>{let a=l.current;if(a){t.current=t.current||{transitionDuration:a.style.transitionDuration,animationName:a.style.animationName},a.style.transitionDuration="0s",a.style.animationName="none";let b=a.getBoundingClientRect();n.current=b.height,p.current=b.width,s.current||(a.style.transitionDuration=t.current.transitionDuration,a.style.animationName=t.current.animationName),k(f)}},[i.open,f]),(0,b.jsx)(D.div,{"data-state":S(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!r,...h,ref:m,style:{"--radix-collapsible-content-height":o?`${o}px`:void 0,"--radix-collapsible-content-width":q?`${q}px`:void 0,...a.style},children:r&&g})});function S(a){return a?"open":"closed"}var T=a.i(10283),U="Accordion",V=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[W,X,Y]=(0,x.createCollection)(U),[Z,$]=w(U,[Y,J]),_=J(),aa=d.default.forwardRef((a,c)=>{let{type:d,...e}=a;return(0,b.jsx)(W.Provider,{scope:a.__scopeAccordion,children:"multiple"===d?(0,b.jsx)(ag,{...e,ref:c}):(0,b.jsx)(af,{...e,ref:c})})});aa.displayName=U;var[ab,ac]=Z(U),[ad,ae]=Z(U,{collapsible:!1}),af=d.default.forwardRef((a,c)=>{let{value:e,defaultValue:f,onValueChange:g=()=>{},collapsible:h=!1,...i}=a,[j,k]=(0,A.useControllableState)({prop:e,defaultProp:f??"",onChange:g,caller:U});return(0,b.jsx)(ab,{scope:a.__scopeAccordion,value:d.default.useMemo(()=>j?[j]:[],[j]),onItemOpen:k,onItemClose:d.default.useCallback(()=>h&&k(""),[h,k]),children:(0,b.jsx)(ad,{scope:a.__scopeAccordion,collapsible:h,children:(0,b.jsx)(aj,{...i,ref:c})})})}),ag=d.default.forwardRef((a,c)=>{let{value:e,defaultValue:f,onValueChange:g=()=>{},...h}=a,[i,j]=(0,A.useControllableState)({prop:e,defaultProp:f??[],onChange:g,caller:U}),k=d.default.useCallback(a=>j((b=[])=>[...b,a]),[j]),l=d.default.useCallback(a=>j((b=[])=>b.filter(b=>b!==a)),[j]);return(0,b.jsx)(ab,{scope:a.__scopeAccordion,value:i,onItemOpen:k,onItemClose:l,children:(0,b.jsx)(ad,{scope:a.__scopeAccordion,collapsible:!0,children:(0,b.jsx)(aj,{...h,ref:c})})})}),[ah,ai]=Z(U),aj=d.default.forwardRef((a,c)=>{let{__scopeAccordion:e,disabled:f,dir:g,orientation:h="vertical",...i}=a,j=d.default.useRef(null),k=(0,y.useComposedRefs)(j,c),l=X(e),m="ltr"===(0,T.useDirection)(g),n=(0,z.composeEventHandlers)(a.onKeyDown,a=>{if(!V.includes(a.key))return;let b=a.target,c=l().filter(a=>!a.ref.current?.disabled),d=c.findIndex(a=>a.ref.current===b),e=c.length;if(-1===d)return;a.preventDefault();let f=d,g=e-1,i=()=>{(f=d+1)>g&&(f=0)},j=()=>{(f=d-1)<0&&(f=g)};switch(a.key){case"Home":f=0;break;case"End":f=g;break;case"ArrowRight":"horizontal"===h&&(m?i():j());break;case"ArrowDown":"vertical"===h&&i();break;case"ArrowLeft":"horizontal"===h&&(m?j():i());break;case"ArrowUp":"vertical"===h&&j()}let k=f%e;c[k].ref.current?.focus()});return(0,b.jsx)(ah,{scope:e,disabled:f,direction:g,orientation:h,children:(0,b.jsx)(W.Slot,{scope:e,children:(0,b.jsx)(D.div,{...i,"data-orientation":h,ref:k,onKeyDown:f?void 0:n})})})}),ak="AccordionItem",[al,am]=Z(ak),an=d.default.forwardRef((a,c)=>{let{__scopeAccordion:d,value:e,...f}=a,g=ai(ak,d),h=ac(ak,d),i=_(d),j=(0,G.useId)(),k=e&&h.value.includes(e)||!1,l=g.disabled||a.disabled;return(0,b.jsx)(al,{scope:d,open:k,disabled:l,triggerId:j,children:(0,b.jsx)(M,{"data-orientation":g.orientation,"data-state":au(k),...i,...f,ref:c,disabled:l,open:k,onOpenChange:a=>{a?h.onItemOpen(e):h.onItemClose(e)}})})});an.displayName=ak;var ao="AccordionHeader",ap=d.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=ai(U,d),g=am(ao,d);return(0,b.jsx)(D.h3,{"data-orientation":f.orientation,"data-state":au(g.open),"data-disabled":g.disabled?"":void 0,...e,ref:c})});ap.displayName=ao;var aq="AccordionTrigger",ar=d.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=ai(U,d),g=am(aq,d),h=ae(aq,d),i=_(d);return(0,b.jsx)(W.ItemSlot,{scope:d,children:(0,b.jsx)(O,{"aria-disabled":g.open&&!h.collapsible||void 0,"data-orientation":f.orientation,id:g.triggerId,...i,...e,ref:c})})});ar.displayName=aq;var as="AccordionContent",at=d.default.forwardRef((a,c)=>{let{__scopeAccordion:d,...e}=a,f=ai(U,d),g=am(as,d),h=_(d);return(0,b.jsx)(Q,{role:"region","aria-labelledby":g.triggerId,"data-orientation":f.orientation,...h,...e,ref:c,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...a.style}})});function au(a){return a?"open":"closed"}at.displayName=as;let av=(0,u.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var aw=a.i(56033);function ax({...a}){return(0,b.jsx)(aa,{"data-slot":"accordion",...a})}function ay({className:a,...c}){return(0,b.jsx)(an,{"data-slot":"accordion-item",className:(0,aw.cn)("border-b last:border-b-0",a),...c})}function az({className:a,children:c,...d}){return(0,b.jsx)(ap,{className:"flex",children:(0,b.jsxs)(ar,{"data-slot":"accordion-trigger",className:(0,aw.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",a),...d,children:[c,(0,b.jsx)(av,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"})]})})}function aA({className:a,children:c,...d}){return(0,b.jsx)(at,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...d,children:(0,b.jsx)("div",{className:(0,aw.cn)("pt-0 pb-4",a),children:c})})}var aB=a.i(8687);function aC(a,b=15){if(a.length<=b)return a;let c=Math.floor((b-3)/2),d=Math.ceil((b-3)/2);return`${a.slice(0,c)}...${a.slice(-d)}`}function aD({identities:a,host:c,onSelect:f,onCreateGuest:g,loading:h=!1}){let[j,k]=(0,d.useState)(0),[l,m]=(0,d.useState)(""),n=a[j];return 0===a.length?(0,b.jsxs)("div",{className:"space-y-4 text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"No identities found."}),(0,b.jsxs)(i.Button,{onClick:g,variant:"outline",className:"gap-2",children:[(0,b.jsx)(v,{className:"h-4 w-4"}),"Create Guest Identity for ",c]})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)("p",{className:"font-semibold text-sm",children:"Sign in as:"}),(0,b.jsx)("div",{className:"relative rounded-lg border-2 border-primary bg-primary/5 p-4 transition-all",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"h-12 w-12 overflow-hidden rounded-full ring-2 ring-primary/20",children:(0,b.jsx)(e.default,{colors:["var(--chart-1)","var(--chart-2)","var(--chart-3)","var(--chart-4)","var(--chart-5)"],name:n.idKey,size:48,variant:"fractal"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-semibold text-sm",children:n.name}),(0,b.jsx)("p",{className:"font-mono text-muted-foreground text-xs",children:aC(n.idKey,15)})]}),(0,b.jsx)(s.Check,{className:"h-5 w-5 text-primary"})]})})]}),a.length>1&&(0,b.jsx)(ax,{className:"mt-2",collapsible:!0,type:"single",children:(0,b.jsxs)(ay,{className:"border-none",value:"other-identities",children:[(0,b.jsxs)(az,{className:"py-2 text-muted-foreground text-sm hover:no-underline",children:["Use a different identity (",a.length-1," other",a.length-1>1?"s":"",")"]}),(0,b.jsx)(aA,{className:"space-y-2 pt-2 pb-2",children:a.map((a,c)=>c===j?null:(0,b.jsxs)("button",{className:"flex w-full items-center gap-3 rounded-lg border bg-card p-3 transition-all hover:border-primary/50 hover:bg-accent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",disabled:h,onClick:()=>{k(c),m("")},type:"button",children:[(0,b.jsx)("div",{className:"h-10 w-10 overflow-hidden rounded-full ring-1 ring-border",children:(0,b.jsx)(e.default,{colors:["var(--chart-1)","var(--chart-2)","var(--chart-3)","var(--chart-4)","var(--chart-5)"],name:a.idKey,size:40,variant:"fractal"})}),(0,b.jsxs)("div",{className:"flex-1 text-left",children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:a.name}),(0,b.jsx)("p",{className:"font-mono text-muted-foreground text-xs",children:aC(a.idKey,12)})]})]},a.idKey))})]})}),(0,b.jsx)("div",{className:"border-t pt-4",children:(0,b.jsxs)("button",{className:"flex w-full items-center gap-3 rounded-lg border border-dashed bg-muted/30 p-3 transition-all hover:border-primary/50 hover:bg-accent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",disabled:h,onClick:g,type:"button",children:[(0,b.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-muted ring-1 ring-border",children:(0,b.jsx)(t.Plus,{className:"h-5 w-5 text-muted-foreground"})}),(0,b.jsxs)("div",{className:"flex-1 text-left",children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:"Create guest identity for this site"}),(0,b.jsx)("p",{className:"text-muted-foreground text-xs",children:"Isolated, host-specific identity"})]})]})}),l&&(0,b.jsx)(aB.Alert,{variant:"destructive",children:(0,b.jsx)(aB.AlertDescription,{children:l})}),(0,b.jsx)(i.Button,{className:"w-full",disabled:h||!n,onClick:()=>{n?f(n.idKey):m("Please select an identity to continue")},size:"lg",type:"button",children:h?"Continuing...":`Continue as ${n?.name||"Unknown"}`})]})}function aE(){let a=(0,c.useSearchParams)(),[f,g]=(0,d.useState)("loading"),[h,i]=(0,d.useState)([]),[k,l]=(0,d.useState)(null),[m,n]=(0,d.useState)(!1),s=a.get("host")||"unknown",t=a.get("icon")||void 0,u=a.get("scopes")||"",v=u?u.split(",").filter(Boolean):[],w=a.get("returnURL")||void 0,x=(0,d.useCallback)(async()=>{g("loading");let a=await (0,o.getStatus)();if("no_wallet"===a.status)g("no_wallet");else if("locked"===a.status)g("locked");else{let a=(await (0,o.getIdentities)()).identities||[];i(a),1===a.length?(l(a[0].idKey),g("authorize")):g("selectIdentity")}},[]);(0,d.useEffect)(()=>{x()},[x]);let y=async()=>{n(!0);try{let a=await fetch("/api/identity/guest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({host:s})});if(!a.ok)throw Error("Failed to create guest identity");let b=await a.json();if(b.success&&b.idKey){let a={idKey:b.idKey,name:b.name,rootAddress:b.rootAddress,counter:b.counter};i(b=>[...b,a]),l(b.idKey),g("authorize")}}catch(a){console.error("Failed to create guest identity:",a)}finally{n(!1)}};return"loading"===f?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"animate-pulse",children:(0,b.jsx)("div",{className:"h-16 w-16 mx-auto rounded-full bg-muted"})}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading TokenPass..."})]})}):"no_wallet"===f?(0,b.jsx)(r.Register,{onSuccess:x}):"locked"===f?(0,b.jsx)(q.Login,{onSuccess:x}):"selectIdentity"===f?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,b.jsxs)(j.Card,{className:"w-full max-w-md",children:[(0,b.jsx)(j.CardHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[t?(0,b.jsx)("img",{alt:s,className:"h-12 w-12 rounded-lg ring-2 ring-border",src:t}):(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-muted ring-2 ring-border",children:(0,b.jsx)(e.default,{colors:["var(--chart-1)","var(--chart-2)","var(--chart-3)","var(--chart-4)","var(--chart-5)"],name:s,size:48,variant:"fractal"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)(j.CardTitle,{className:"text-lg",children:s}),(0,b.jsx)(j.CardDescription,{children:"wants to access your account"})]})]})}),(0,b.jsxs)(j.CardContent,{className:"space-y-6",children:[(0,b.jsx)("p",{className:"text-muted-foreground text-sm",children:"Select which identity to use with this application."}),(0,b.jsx)(aD,{identities:h,host:s,onSelect:a=>{l(a),g("authorize")},onCreateGuest:y,loading:m})]})]})}):(0,b.jsx)(p,{host:s,icon:t,scopes:v,returnURL:w,selectedIdentityKey:k})}function aF(){return(0,b.jsx)(d.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center space-y-4",children:[(0,b.jsx)("div",{className:"animate-pulse",children:(0,b.jsx)("div",{className:"h-16 w-16 mx-auto rounded-full bg-muted"})}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading TokenPass..."})]})}),children:(0,b.jsx)(aE,{})})}a.s(["default",()=>aF],72115)}];

//# sourceMappingURL=web_src_app_auth_page_tsx_f32823df._.js.map