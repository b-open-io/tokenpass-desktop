(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63052,e=>{"use strict";var s=e.i(14294),a=e.i(56881),t=e.i(30878),l=e.i(58675),n=e.i(87054),r=e.i(28574),i=e.i(66904),c=e.i(58021),o=e.i(36191),d=e.i(77982),m=e.i(34066),x=e.i(34432),h=e.i(24741);function u(e){let u,y,f,g,v,b,N,S,w,C,_,D,k,T,I,P,B,E,A,L,F,K,M,O,R,U,z,H,$,W=(0,a.c)(66),{keys:q,states:G,onLogout:V}=e,[Y,J]=(0,t.useState)(""),[Q,X]=(0,t.useState)(null),[Z,ee]=(0,t.useState)(!1),[es,ea]=(0,t.useState)(!1),[et,el]=(0,t.useState)(!1);W[0]===Symbol.for("react.memo_cache_sentinel")?(u={},W[0]=u):u=W[0];let[en,er]=(0,t.useState)(u),[ei,ec]=(0,t.useState)(!1);W[1]!==G?(y=G.find(j),W[1]=G,W[2]=y):y=W[2];let eo=y;W[3]!==V?(f=async()=>{await (0,h.logout)(),V()},W[3]=V,W[4]=f):f=W[4];let ed=f;W[5]!==Y?(g=async()=>{ee(!0),X(null);let e=await (0,h.exportSeed)(Y);ee(!1),e.error?X({error:e.error}):e.mnemonic&&X({mnemonic:e.mnemonic})},W[5]=Y,W[6]=g):g=W[6];let em=g;W[7]!==en?(v=async()=>{ec(!0),await (0,h.saveProfile)(en),ec(!1),el(!1)},W[7]=en,W[8]=v):v=W[8];let ex=v;W[9]!==G?(b=e=>G.filter(s=>s.host===e),W[9]=G,W[10]=b):b=W[10];let eh=b;W[11]===Symbol.for("react.memo_cache_sentinel")?(N=(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(n.Avatar,{className:"h-8 w-8",children:[(0,s.jsx)(n.AvatarImage,{src:(0,h.getSecurityIconUrl)(),alt:"Security Icon"}),(0,s.jsx)(n.AvatarFallback,{children:"TP"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-lg font-semibold",children:"TokenPass"}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Wallet Connected"})]})]}),W[11]=N):N=W[11],W[12]===Symbol.for("react.memo_cache_sentinel")?(S=(0,s.jsx)(l.ModeToggle,{}),W[12]=S):S=W[12],W[13]!==eo?(w=(0,s.jsx)(o.DialogTrigger,{asChild:!0,children:(0,s.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>{eo&&er({displayName:eo.displayName,paymail:eo.paymail,bapID:eo.bapID})},children:"Edit Profile"})}),W[13]=eo,W[14]=w):w=W[14],W[15]===Symbol.for("react.memo_cache_sentinel")?(C=(0,s.jsxs)(o.DialogHeader,{children:[(0,s.jsx)(o.DialogTitle,{children:"Edit Global Profile"}),(0,s.jsx)(o.DialogDescription,{children:"This is your public profile."})]}),W[15]=C):C=W[15],W[16]===Symbol.for("react.memo_cache_sentinel")?(_=(0,s.jsx)(m.Label,{htmlFor:"displayName",children:"Display Name"}),W[16]=_):_=W[16];let eu=en.displayName||"";W[17]!==en?(D=e=>er({...en,displayName:e.target.value}),W[17]=en,W[18]=D):D=W[18],W[19]!==eu||W[20]!==D?(k=(0,s.jsxs)("div",{className:"space-y-2",children:[_,(0,s.jsx)(d.Input,{id:"displayName",value:eu,onChange:D})]}),W[19]=eu,W[20]=D,W[21]=k):k=W[21],W[22]===Symbol.for("react.memo_cache_sentinel")?(T=(0,s.jsx)(m.Label,{htmlFor:"paymail",children:"Paymail"}),W[22]=T):T=W[22];let ep=en.paymail||"";W[23]!==en?(I=e=>er({...en,paymail:e.target.value}),W[23]=en,W[24]=I):I=W[24],W[25]!==ep||W[26]!==I?(P=(0,s.jsxs)("div",{className:"space-y-2",children:[T,(0,s.jsx)(d.Input,{id:"paymail",value:ep,onChange:I})]}),W[25]=ep,W[26]=I,W[27]=P):P=W[27],W[28]!==en.bapID?(B=en.bapID&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.Label,{htmlFor:"bapID",children:"BAP ID"}),(0,s.jsx)(d.Input,{id:"bapID",value:en.bapID||"",disabled:!0,className:"font-mono text-xs"})]}),W[28]=en.bapID,W[29]=B):B=W[29];let ej=ei?"Saving...":"Save Profile";return W[30]!==ex||W[31]!==ei||W[32]!==ej?(E=(0,s.jsx)(i.Button,{onClick:ex,disabled:ei,className:"w-full",children:ej}),W[30]=ex,W[31]=ei,W[32]=ej,W[33]=E):E=W[33],W[34]!==k||W[35]!==P||W[36]!==B||W[37]!==E?(A=(0,s.jsxs)(o.DialogContent,{children:[C,(0,s.jsxs)("div",{className:"space-y-4",children:[k,P,B,E]})]}),W[34]=k,W[35]=P,W[36]=B,W[37]=E,W[38]=A):A=W[38],W[39]!==et||W[40]!==A||W[41]!==w?(L=(0,s.jsxs)(o.Dialog,{open:et,onOpenChange:el,children:[w,A]}),W[39]=et,W[40]=A,W[41]=w,W[42]=L):L=W[42],W[43]===Symbol.for("react.memo_cache_sentinel")?(F=e=>{ea(e),e||(J(""),X(null))},W[43]=F):F=W[43],W[44]===Symbol.for("react.memo_cache_sentinel")?(K=(0,s.jsx)(o.DialogTrigger,{asChild:!0,children:(0,s.jsx)(i.Button,{variant:"outline",size:"sm",children:"Export"})}),W[44]=K):K=W[44],W[45]===Symbol.for("react.memo_cache_sentinel")?(M=(0,s.jsxs)(o.DialogHeader,{children:[(0,s.jsx)(o.DialogTitle,{children:"Export Wallet Seed"}),(0,s.jsx)(o.DialogDescription,{children:"Enter your password to reveal your seed phrase."})]}),W[45]=M):M=W[45],W[46]!==Y||W[47]!==Q||W[48]!==em||W[49]!==Z?(O=(0,s.jsxs)(o.DialogContent,{children:[M,Q?.mnemonic?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"p-3 bg-muted rounded-md",children:(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:'The derivation path follows the BIP44 standard with a twist: A new account is created per web host, using branch "2".'})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.Label,{children:"Seed Phrase"}),(0,s.jsx)("div",{className:"p-3 bg-muted rounded-md font-mono text-sm break-all",children:Q.mnemonic})]}),(0,s.jsx)(i.Button,{onClick:()=>(function(e){navigator.clipboard.writeText(e)})(Q.mnemonic),variant:"outline",className:"w-full",children:"Copy to Clipboard"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m.Label,{htmlFor:"exportPassword",children:"Password"}),(0,s.jsx)(d.Input,{id:"exportPassword",type:"password",value:Y,onChange:e=>J(e.target.value),onKeyDown:e=>"Enter"===e.key&&em(),placeholder:"Enter your password"})]}),Q?.error&&(0,s.jsx)("p",{className:"text-sm text-destructive",children:Q.error}),(0,s.jsx)(i.Button,{onClick:em,disabled:Z||!Y,className:"w-full",children:Z?"Decrypting...":"Export"})]})]}),W[46]=Y,W[47]=Q,W[48]=em,W[49]=Z,W[50]=O):O=W[50],W[51]!==es||W[52]!==O?(R=(0,s.jsxs)(o.Dialog,{open:es,onOpenChange:F,children:[K,O]}),W[51]=es,W[52]=O,W[53]=R):R=W[53],W[54]!==ed?(U=(0,s.jsx)(i.Button,{variant:"outline",size:"sm",onClick:ed,children:"Logout"}),W[54]=ed,W[55]=U):U=W[55],W[56]!==L||W[57]!==R||W[58]!==U?(z=(0,s.jsx)("header",{className:"border-b",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[N,(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[S,L,R,U]})]})}),W[56]=L,W[57]=R,W[58]=U,W[59]=z):z=W[59],W[60]!==eh||W[61]!==q?(H=(0,s.jsx)("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:0===q.length?(0,s.jsxs)(c.Card,{children:[(0,s.jsxs)(c.CardHeader,{className:"text-center",children:[(0,s.jsx)(c.CardTitle,{children:"Ready to Connect"}),(0,s.jsx)(c.CardDescription,{children:"Your wallet is set up and ready"})]}),(0,s.jsxs)(c.CardContent,{className:"text-center space-y-4",children:[(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Keys are created automatically when websites request authentication."}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Visit a TokenPass-enabled app to create your first key, or use the"," ",(0,s.jsx)("strong",{children:"Export"})," button above to back up your seed phrase."]})]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Connected Sites"}),q.map(e=>{let a=eh(e.host);return(0,s.jsx)(c.Card,{children:(0,s.jsx)(c.CardContent,{className:"pt-6",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsxs)(n.Avatar,{className:"h-10 w-10",children:[(0,s.jsx)(n.AvatarImage,{src:a[0]?.icon,alt:e.host}),(0,s.jsx)(n.AvatarFallback,{children:e.host.slice(0,2).toUpperCase()})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-medium",children:e.host}),(0,s.jsx)("p",{className:"text-xs font-mono text-muted-foreground",children:e.address})]}),a.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(x.Separator,{}),(0,s.jsx)("div",{className:"space-y-1",children:a.map(e=>(0,s.jsxs)("div",{className:"text-sm",children:[e.accessToken&&(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(r.Badge,{variant:"outline",className:"text-xs",children:["Token: ",e.accessToken.slice(0,8),"..."]}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["expires ",function(e){if(!e)return"Never";let s=Date.now();if(e<s)return"Expired";let a=e-s,t=Math.floor(a/6e4),l=Math.floor(a/36e5),n=Math.floor(a/864e5);return n>0?`${n}d`:l>0?`${l}h`:t>0?`${t}m`:"< 1m"}(e.expireTime)]})]}),e.scopes&&e.scopes.length>0&&(0,s.jsx)("div",{className:"flex gap-1 mt-1 flex-wrap",children:e.scopes.map(p)})]},e.accessToken||e.host))})]})]})]})})},e.path)})]})}),W[60]=eh,W[61]=q,W[62]=H):H=W[62],W[63]!==z||W[64]!==H?($=(0,s.jsxs)("div",{className:"min-h-screen",children:[z,H]}),W[63]=z,W[64]=H,W[65]=$):$=W[65],$}function p(e){return(0,s.jsx)(r.Badge,{variant:"secondary",className:"text-xs",children:e},e)}function j(e){return"global"===e.host}var y=e.i(79889),f=e.i(99465);function g(){let e,l,n,r=(0,a.c)(13),[i,c]=(0,t.useState)("loading"),[o,d]=(0,t.useState)(null);r[0]===Symbol.for("react.memo_cache_sentinel")?(e=async()=>{c("loading");let e=await (0,h.getStatus)();d(e),c(e.status)},r[0]=e):e=r[0];let m=e;if(r[1]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{m()},n=[m],r[1]=l,r[2]=n):(l=r[1],n=r[2]),(0,t.useEffect)(l,n),"loading"===i){let e;return r[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsx)("div",{className:"animate-pulse",children:(0,s.jsx)("div",{className:"h-16 w-16 mx-auto rounded-full bg-muted"})}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading TokenPass..."})]})}),r[3]=e):e=r[3],e}if("no_wallet"===i){let e;return r[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(f.Register,{onSuccess:m}),r[4]=e):e=r[4],e}if("locked"===i){let e;return r[5]===Symbol.for("react.memo_cache_sentinel")?(e=(0,s.jsx)(y.Login,{onSuccess:m}),r[5]=e):e=r[5],e}if("unlocked"===i&&o){let e,a,t;return r[6]!==o.keys?(e=o.keys||[],r[6]=o.keys,r[7]=e):e=r[7],r[8]!==o.states?(a=o.states||[],r[8]=o.states,r[9]=a):a=r[9],r[10]!==e||r[11]!==a?(t=(0,s.jsx)(u,{keys:e,states:a,onLogout:m}),r[10]=e,r[11]=a,r[12]=t):t=r[12],t}return null}e.s(["default",()=>g],63052)}]);