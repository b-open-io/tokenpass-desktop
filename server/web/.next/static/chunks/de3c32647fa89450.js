(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,53913,(e,t,r)=>{t.exports=e.r(87603)},86076,e=>{"use strict";var t=e.i(14294),r=e.i(56881),a=e.i(30878),n=e.i(41416),s=e.i(9945);function i(e,r=[]){let n=[],s=()=>{let t=n.map(e=>a.createContext(e));return function(r){let n=r?.[e]||t;return a.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return s.scopeName=e,[function(r,s){let i=a.createContext(s),l=n.length;n=[...n,s];let o=r=>{let{scope:n,children:s,...o}=r,c=n?.[e]?.[l]||i,d=a.useMemo(()=>o,Object.values(o));return(0,t.jsx)(c.Provider,{value:d,children:s})};return o.displayName=r+"Provider",[o,function(t,n){let o=n?.[e]?.[l]||i,c=a.useContext(o);if(c)return c;if(void 0!==s)return s;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:a})=>{let n=r(e)[`__scope${a}`];return{...t,...n}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(s,...r)]}e.i(73340);var l=Symbol("radix.slottable");function o(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===l}var c=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{var n,i;let l,c,d,u=(i=n=`Primitive.${r}`,(l=a.forwardRef((e,t)=>{let{children:r,...n}=e;if(a.isValidElement(r)){var i;let e,l,o=(i=r,(l=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(l=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),c=function(e,t){let r={...t};for(let a in t){let n=e[a],s=t[a];/^on[A-Z]/.test(a)?n&&s?r[a]=(...e)=>{let t=s(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...s}:"className"===a&&(r[a]=[n,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==a.Fragment&&(c.ref=t?(0,s.composeRefs)(t,o):o),a.cloneElement(r,c)}return a.Children.count(r)>1?a.Children.only(null):null})).displayName=`${i}.SlotClone`,c=l,(d=a.forwardRef((e,r)=>{let{children:n,...s}=e,i=a.Children.toArray(n),l=i.find(o);if(l){let e=l.props.children,n=i.map(t=>t!==l?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,t.jsx)(c,{...s,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,n):null})}return(0,t.jsx)(c,{...s,ref:r,children:n})})).displayName=`${n}.Slot`,d),m=a.forwardRef((e,a)=>{let{asChild:n,...s}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(n?u:r,{...s,ref:a})});return m.displayName=`Primitive.${r}`,{...e,[r]:m}},{}),d=e.i(62959),u=e.i(65488),m=e.i(42899),f=e.i(26168),p=e.i(95509),h="Radio",[x,v]=i(h),[y,g]=x(h),b=a.forwardRef((e,r)=>{let{__scopeRadio:i,name:l,checked:o=!1,required:d,disabled:u,value:m="on",onCheck:f,form:p,...h}=e,[x,v]=a.useState(null),g=(0,s.useComposedRefs)(r,e=>v(e)),b=a.useRef(!1),j=!x||p||!!x.closest("form");return(0,t.jsxs)(y,{scope:i,checked:o,disabled:u,children:[(0,t.jsx)(c.button,{type:"button",role:"radio","aria-checked":o,"data-state":C(o),"data-disabled":u?"":void 0,disabled:u,value:m,...h,ref:g,onClick:(0,n.composeEventHandlers)(e.onClick,e=>{o||f?.(),j&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),j&&(0,t.jsx)(N,{control:x,bubbles:!b.current,name:l,value:m,checked:o,required:d,disabled:u,form:p,style:{transform:"translateX(-100%)"}})]})});b.displayName=h;var j="RadioIndicator",w=a.forwardRef((e,r)=>{let{__scopeRadio:a,forceMount:n,...s}=e,i=g(j,a);return(0,t.jsx)(p.Presence,{present:n||i.checked,children:(0,t.jsx)(c.span,{"data-state":C(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:r})})});w.displayName=j;var N=a.forwardRef(({__scopeRadio:e,control:r,checked:n,bubbles:i=!0,...l},o)=>{let d,u=a.useRef(null),m=(0,s.useComposedRefs)(u,o),p=(d=a.useRef({value:n,previous:n}),a.useMemo(()=>(d.current.value!==n&&(d.current.previous=d.current.value,d.current.value=n),d.current.previous),[n])),h=(0,f.useSize)(r);return a.useEffect(()=>{let e=u.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(p!==n&&t){let r=new Event("click",{bubbles:i});t.call(e,n),e.dispatchEvent(r)}},[p,n,i]),(0,t.jsx)(c.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...l,tabIndex:-1,ref:m,style:{...l.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function C(e){return e?"checked":"unchecked"}N.displayName="RadioBubbleInput";var _=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],R="RadioGroup",[k,S]=i(R,[d.createRovingFocusGroupScope,v]),A=(0,d.createRovingFocusGroupScope)(),I=v(),[E,P]=k(R),D=a.forwardRef((e,r)=>{let{__scopeRadioGroup:a,name:n,defaultValue:s,value:i,required:l=!1,disabled:o=!1,orientation:f,dir:p,loop:h=!0,onValueChange:x,...v}=e,y=A(a),g=(0,m.useDirection)(p),[b,j]=(0,u.useControllableState)({prop:i,defaultProp:s??null,onChange:x,caller:R});return(0,t.jsx)(E,{scope:a,name:n,required:l,disabled:o,value:b,onValueChange:j,children:(0,t.jsx)(d.Root,{asChild:!0,...y,orientation:f,dir:g,loop:h,children:(0,t.jsx)(c.div,{role:"radiogroup","aria-required":l,"aria-orientation":f,"data-disabled":o?"":void 0,dir:g,...v,ref:r})})})});D.displayName=R;var T="RadioGroupItem",$=a.forwardRef((e,r)=>{let{__scopeRadioGroup:i,disabled:l,...o}=e,c=P(T,i),u=c.disabled||l,m=A(i),f=I(i),p=a.useRef(null),h=(0,s.useComposedRefs)(r,p),x=c.value===o.value,v=a.useRef(!1);return a.useEffect(()=>{let e=e=>{_.includes(e.key)&&(v.current=!0)},t=()=>v.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,t.jsx)(d.Item,{asChild:!0,...m,focusable:!u,active:x,children:(0,t.jsx)(b,{disabled:u,required:c.required,checked:x,...f,...o,name:c.name,ref:h,onCheck:()=>c.onValueChange(o.value),onKeyDown:(0,n.composeEventHandlers)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,n.composeEventHandlers)(o.onFocus,()=>{v.current&&p.current?.click()})})})});$.displayName=T;var K=a.forwardRef((e,r)=>{let{__scopeRadioGroup:a,...n}=e,s=I(a);return(0,t.jsx)(w,{...s,...n,ref:r})});K.displayName="RadioGroupIndicator";var O=e.i(13542),z=e.i(55552);function L(e){let a,n,s,i,l=(0,r.c)(8);return l[0]!==e?({className:a,...n}=e,l[0]=e,l[1]=a,l[2]=n):(a=l[1],n=l[2]),l[3]!==a?(s=(0,z.cn)("grid gap-3",a),l[3]=a,l[4]=s):s=l[4],l[5]!==n||l[6]!==s?(i=(0,t.jsx)(D,{"data-slot":"radio-group",className:s,...n}),l[5]=n,l[6]=s,l[7]=i):i=l[7],i}function F(e){let a,n,s,i,l,o=(0,r.c)(9);return o[0]!==e?({className:a,...n}=e,o[0]=e,o[1]=a,o[2]=n):(a=o[1],n=o[2]),o[3]!==a?(s=(0,z.cn)("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",a),o[3]=a,o[4]=s):s=o[4],o[5]===Symbol.for("react.memo_cache_sentinel")?(i=(0,t.jsx)(K,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:(0,t.jsx)(O.CircleIcon,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})}),o[5]=i):i=o[5],o[6]!==n||o[7]!==s?(l=(0,t.jsx)($,{"data-slot":"radio-group-item",className:s,...n,children:i}),o[6]=n,o[7]=s,o[8]=l):l=o[8],l}e.s(["RadioGroup",()=>L,"RadioGroupItem",()=>F],86076)},19583,96720,67101,e=>{"use strict";var t=e.i(68632);e.s(["Check",()=>t.default],19583);let r=(0,e.i(92511).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>r],96720);var a=e.i(14294),n=e.i(56881),s=e.i(70008),i=e.i(55552);let l=(0,s.cva)("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function o(e){let t,r,s,o,c,d=(0,n.c)(10);return d[0]!==e?({className:t,variant:s,...r}=e,d[0]=e,d[1]=t,d[2]=r,d[3]=s):(t=d[1],r=d[2],s=d[3]),d[4]!==t||d[5]!==s?(o=(0,i.cn)(l({variant:s}),t),d[4]=t,d[5]=s,d[6]=o):o=d[6],d[7]!==r||d[8]!==o?(c=(0,a.jsx)("div",{"data-slot":"alert",role:"alert",className:o,...r}),d[7]=r,d[8]=o,d[9]=c):c=d[9],c}function c(e){let t,r,s,l,o=(0,n.c)(8);return o[0]!==e?({className:t,...r}=e,o[0]=e,o[1]=t,o[2]=r):(t=o[1],r=o[2]),o[3]!==t?(s=(0,i.cn)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",t),o[3]=t,o[4]=s):s=o[4],o[5]!==r||o[6]!==s?(l=(0,a.jsx)("div",{"data-slot":"alert-description",className:s,...r}),o[5]=r,o[6]=s,o[7]=l):l=o[7],l}e.s(["Alert",()=>o,"AlertDescription",()=>c],67101)},1015,e=>{"use strict";var t=e.i(14294),r=e.i(56881),a=e.i(53913),n=e.i(30878),s=e.i(25592),i=e.i(58675),l=e.i(87054),o=e.i(28574),c=e.i(66904),d=e.i(58021),u=e.i(77982),m=e.i(34066),f=e.i(86076),p=e.i(34432),h=e.i(24741);function x(e){let a,s,o,x,g,b,j,w,N,C,_,R,k,S,A,I,E,P,D,T,$,K,O=(0,r.c)(49),{host:z,icon:L,scopes:F,returnURL:M,selectedIdentityKey:H}=e,[U,V]=(0,n.useState)(""),[B,G]=(0,n.useState)("once"),[q,W]=(0,n.useState)(null),[Z,J]=(0,n.useState)(!1);O[0]!==B||O[1]!==z||O[2]!==L||O[3]!==U||O[4]!==M||O[5]!==F||O[6]!==H?(a=async e=>{if(e.preventDefault(),!U)return void W("Please enter your password");J(!0),W(null);let t=await (0,h.authorize)({password:U,host:z,icon:L,scopes:F,expire:B,identityKey:H||void 0});if(J(!1),t.error)W(t.error),V("");else if(t.success&&t.accessToken){if(window.opener)window.close();else if(M){let e=new URL(M);e.searchParams.set("tokenPass",t.accessToken),window.location.href=e.toString()}}},O[0]=B,O[1]=z,O[2]=L,O[3]=U,O[4]=M,O[5]=F,O[6]=H,O[7]=a):a=O[7];let X=a;O[8]===Symbol.for("react.memo_cache_sentinel")?(s=[{value:"once",label:"Ask Every Time"},{value:"1h",label:"Allow for 1 Hour"},{value:"1d",label:"Allow for 1 Day"},{value:"1m",label:"Allow for 1 Month"},{value:"forever",label:"Allow Forever"}],O[8]=s):s=O[8];let Q=s;O[9]===Symbol.for("react.memo_cache_sentinel")?(o=(0,t.jsx)("header",{className:"border-b",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)(l.Avatar,{className:"h-8 w-8",children:[(0,t.jsx)(l.AvatarImage,{src:(0,h.getSecurityIconUrl)(),alt:"TokenPass"}),(0,t.jsx)(l.AvatarFallback,{children:"TP"})]}),(0,t.jsx)("h1",{className:"text-lg font-semibold",children:"TokenPass"})]}),(0,t.jsx)(i.ModeToggle,{})]})}),O[9]=o):o=O[9],O[10]!==z||O[11]!==L?(x=L&&(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)(l.Avatar,{className:"h-20 w-20",children:[(0,t.jsx)(l.AvatarImage,{src:L,alt:z}),(0,t.jsx)(l.AvatarFallback,{children:z.slice(0,2).toUpperCase()})]})}),O[10]=z,O[11]=L,O[12]=x):x=O[12],O[13]!==z?(g=(0,t.jsxs)(d.CardTitle,{children:["Authorize ",z]}),O[13]=z,O[14]=g):g=O[14],O[15]===Symbol.for("react.memo_cache_sentinel")?(b=(0,t.jsx)(d.CardDescription,{children:"This site is requesting access to your wallet"}),O[15]=b):b=O[15],O[16]!==g?(j=(0,t.jsxs)("div",{children:[g,b]}),O[16]=g,O[17]=j):j=O[17],O[18]!==x||O[19]!==j?(w=(0,t.jsxs)(d.CardHeader,{className:"text-center space-y-4",children:[x,j]}),O[18]=x,O[19]=j,O[20]=w):w=O[20],O[21]===Symbol.for("react.memo_cache_sentinel")?(N=(0,t.jsx)(m.Label,{htmlFor:"password",children:"Password"}),O[21]=N):N=O[21],O[22]===Symbol.for("react.memo_cache_sentinel")?(C=e=>V(e.target.value),O[22]=C):C=O[22],O[23]!==U?(_=(0,t.jsxs)("div",{className:"space-y-2",children:[N,(0,t.jsx)(u.Input,{id:"password",type:"password",value:U,onChange:C,placeholder:"Enter your password",autoFocus:!0})]}),O[23]=U,O[24]=_):_=O[24],O[25]===Symbol.for("react.memo_cache_sentinel")?(R=(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-muted rounded-md",children:[(0,t.jsxs)(l.Avatar,{className:"h-6 w-6",children:[(0,t.jsx)(l.AvatarImage,{src:(0,h.getSecurityIconUrl)(),alt:"Security"}),(0,t.jsx)(l.AvatarFallback,{children:"!"})]}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Make sure you recognize this security image"})]}),k=(0,t.jsx)(p.Separator,{}),O[25]=R,O[26]=k):(R=O[25],k=O[26]),O[27]===Symbol.for("react.memo_cache_sentinel")?(S=(0,t.jsx)(m.Label,{className:"text-muted-foreground",children:"This host would like access to:"}),O[27]=S):S=O[27],O[28]!==F?(A=(0,t.jsxs)("div",{className:"space-y-2",children:[S,(0,t.jsx)("div",{className:"p-3 bg-muted rounded-md",children:F.length>0?(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:F.map(y)}):(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Authentication only"})})]}),O[28]=F,O[29]=A):A=O[29],O[30]===Symbol.for("react.memo_cache_sentinel")?(I=(0,t.jsx)(m.Label,{children:"Authorization Duration"}),O[30]=I):I=O[30],O[31]===Symbol.for("react.memo_cache_sentinel")?(E=Q.map(v),O[31]=E):E=O[31],O[32]!==B?(P=(0,t.jsxs)("div",{className:"space-y-3",children:[I,(0,t.jsx)(f.RadioGroup,{value:B,onValueChange:G,children:E})]}),O[32]=B,O[33]=P):P=O[33],O[34]!==q?(D=q&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:q}),O[34]=q,O[35]=D):D=O[35];let Y=Z?"Authorizing...":"Allow";return O[36]!==Z||O[37]!==Y?(T=(0,t.jsx)(c.Button,{type:"submit",className:"w-full",disabled:Z,children:Y}),O[36]=Z,O[37]=Y,O[38]=T):T=O[38],O[39]!==X||O[40]!==_||O[41]!==A||O[42]!==P||O[43]!==D||O[44]!==T?($=(0,t.jsx)(d.CardContent,{children:(0,t.jsxs)("form",{onSubmit:X,className:"space-y-6",children:[_,R,k,A,P,D,T]})}),O[39]=X,O[40]=_,O[41]=A,O[42]=P,O[43]=D,O[44]=T,O[45]=$):$=O[45],O[46]!==$||O[47]!==w?(K=(0,t.jsxs)("div",{className:"min-h-screen flex flex-col",children:[o,(0,t.jsx)("main",{className:"flex-1 flex items-center justify-center p-4",children:(0,t.jsxs)(d.Card,{className:"w-full max-w-md",children:[w,$]})})]}),O[46]=$,O[47]=w,O[48]=K):K=O[48],K}function v(e){return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(f.RadioGroupItem,{value:e.value,id:e.value}),(0,t.jsx)(m.Label,{htmlFor:e.value,className:"font-normal cursor-pointer",children:e.label})]},e.value)}function y(e){return(0,t.jsx)(o.Badge,{variant:"secondary",children:e},e)}var g=e.i(79889),b=e.i(99465),j=e.i(19583),w=e.i(96720),N=e.i(92511);let C=(0,N.default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function _(e,r=[]){let a=[],s=()=>{let t=a.map(e=>n.createContext(e));return function(r){let a=r?.[e]||t;return n.useMemo(()=>({[`__scope${e}`]:{...r,[e]:a}}),[r,a])}};return s.scopeName=e,[function(r,s){let i=n.createContext(s),l=a.length;a=[...a,s];let o=r=>{let{scope:a,children:s,...o}=r,c=a?.[e]?.[l]||i,d=n.useMemo(()=>o,Object.values(o));return(0,t.jsx)(c.Provider,{value:d,children:s})};return o.displayName=r+"Provider",[o,function(t,a){let o=a?.[e]?.[l]||i,c=n.useContext(o);if(c)return c;if(void 0!==s)return s;throw Error(`\`${t}\` must be used within \`${r}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let a=r.reduce((t,{useScope:r,scopeName:a})=>{let n=r(e)[`__scope${a}`];return{...t,...n}},{});return n.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}(s,...r)]}var R=e.i(36180),k=e.i(9945),S=e.i(41416),A=e.i(65488);e.i(73340);var I=Symbol("radix.slottable");function E(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===I}var P=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{var a,s;let i,l,o,c=(s=a=`Primitive.${r}`,(i=n.forwardRef((e,t)=>{let{children:r,...a}=e;if(n.isValidElement(r)){var s;let e,i,l=(s=r,(i=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.ref:(i=(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?s.props.ref:s.props.ref||s.ref),o=function(e,t){let r={...t};for(let a in t){let n=e[a],s=t[a];/^on[A-Z]/.test(a)?n&&s?r[a]=(...e)=>{let t=s(...e);return n(...e),t}:n&&(r[a]=n):"style"===a?r[a]={...n,...s}:"className"===a&&(r[a]=[n,s].filter(Boolean).join(" "))}return{...e,...r}}(a,r.props);return r.type!==n.Fragment&&(o.ref=t?(0,k.composeRefs)(t,l):l),n.cloneElement(r,o)}return n.Children.count(r)>1?n.Children.only(null):null})).displayName=`${s}.SlotClone`,l=i,(o=n.forwardRef((e,r)=>{let{children:a,...s}=e,i=n.Children.toArray(a),o=i.find(E);if(o){let e=o.props.children,a=i.map(t=>t!==o?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,t.jsx)(l,{...s,ref:r,children:n.isValidElement(e)?n.cloneElement(e,void 0,a):null})}return(0,t.jsx)(l,{...s,ref:r,children:a})})).displayName=`${a}.Slot`,o),d=n.forwardRef((e,a)=>{let{asChild:n,...s}=e;return"u">typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,t.jsx)(n?c:r,{...s,ref:a})});return d.displayName=`Primitive.${r}`,{...e,[r]:d}},{}),D=e.i(95945),T=e.i(95509),$=e.i(10559),K="Collapsible",[O,z]=_(K),[L,F]=O(K),M=n.forwardRef((e,r)=>{let{__scopeCollapsible:a,open:s,defaultOpen:i,disabled:l,onOpenChange:o,...c}=e,[d,u]=(0,A.useControllableState)({prop:s,defaultProp:i??!1,onChange:o,caller:K});return(0,t.jsx)(L,{scope:a,disabled:l,contentId:(0,$.useId)(),open:d,onOpenToggle:n.useCallback(()=>u(e=>!e),[u]),children:(0,t.jsx)(P.div,{"data-state":q(d),"data-disabled":l?"":void 0,...c,ref:r})})});M.displayName=K;var H="CollapsibleTrigger",U=n.forwardRef((e,r)=>{let{__scopeCollapsible:a,...n}=e,s=F(H,a);return(0,t.jsx)(P.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":q(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...n,ref:r,onClick:(0,S.composeEventHandlers)(e.onClick,s.onOpenToggle)})});U.displayName=H;var V="CollapsibleContent",B=n.forwardRef((e,r)=>{let{forceMount:a,...n}=e,s=F(V,e.__scopeCollapsible);return(0,t.jsx)(T.Presence,{present:a||s.open,children:({present:e})=>(0,t.jsx)(G,{...n,ref:r,present:e})})});B.displayName=V;var G=n.forwardRef((e,r)=>{let{__scopeCollapsible:a,present:s,children:i,...l}=e,o=F(V,a),[c,d]=n.useState(s),u=n.useRef(null),m=(0,k.useComposedRefs)(r,u),f=n.useRef(0),p=f.current,h=n.useRef(0),x=h.current,v=o.open||c,y=n.useRef(v),g=n.useRef(void 0);return n.useEffect(()=>{let e=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,D.useLayoutEffect)(()=>{let e=u.current;if(e){g.current=g.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();f.current=t.height,h.current=t.width,y.current||(e.style.transitionDuration=g.current.transitionDuration,e.style.animationName=g.current.animationName),d(s)}},[o.open,s]),(0,t.jsx)(P.div,{"data-state":q(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...l,ref:m,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...e.style},children:v&&i})});function q(e){return e?"open":"closed"}var W=e.i(42899),Z="Accordion",J=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[X,Q,Y]=(0,R.createCollection)(Z),[ee,et]=_(Z,[Y,z]),er=z(),ea=n.default.forwardRef((e,r)=>{let{type:a,...n}=e;return(0,t.jsx)(X.Provider,{scope:e.__scopeAccordion,children:"multiple"===a?(0,t.jsx)(ec,{...n,ref:r}):(0,t.jsx)(eo,{...n,ref:r})})});ea.displayName=Z;var[en,es]=ee(Z),[ei,el]=ee(Z,{collapsible:!1}),eo=n.default.forwardRef((e,r)=>{let{value:a,defaultValue:s,onValueChange:i=()=>{},collapsible:l=!1,...o}=e,[c,d]=(0,A.useControllableState)({prop:a,defaultProp:s??"",onChange:i,caller:Z});return(0,t.jsx)(en,{scope:e.__scopeAccordion,value:n.default.useMemo(()=>c?[c]:[],[c]),onItemOpen:d,onItemClose:n.default.useCallback(()=>l&&d(""),[l,d]),children:(0,t.jsx)(ei,{scope:e.__scopeAccordion,collapsible:l,children:(0,t.jsx)(em,{...o,ref:r})})})}),ec=n.default.forwardRef((e,r)=>{let{value:a,defaultValue:s,onValueChange:i=()=>{},...l}=e,[o,c]=(0,A.useControllableState)({prop:a,defaultProp:s??[],onChange:i,caller:Z}),d=n.default.useCallback(e=>c((t=[])=>[...t,e]),[c]),u=n.default.useCallback(e=>c((t=[])=>t.filter(t=>t!==e)),[c]);return(0,t.jsx)(en,{scope:e.__scopeAccordion,value:o,onItemOpen:d,onItemClose:u,children:(0,t.jsx)(ei,{scope:e.__scopeAccordion,collapsible:!0,children:(0,t.jsx)(em,{...l,ref:r})})})}),[ed,eu]=ee(Z),em=n.default.forwardRef((e,r)=>{let{__scopeAccordion:a,disabled:s,dir:i,orientation:l="vertical",...o}=e,c=n.default.useRef(null),d=(0,k.useComposedRefs)(c,r),u=Q(a),m="ltr"===(0,W.useDirection)(i),f=(0,S.composeEventHandlers)(e.onKeyDown,e=>{if(!J.includes(e.key))return;let t=e.target,r=u().filter(e=>!e.ref.current?.disabled),a=r.findIndex(e=>e.ref.current===t),n=r.length;if(-1===a)return;e.preventDefault();let s=a,i=n-1,o=()=>{(s=a+1)>i&&(s=0)},c=()=>{(s=a-1)<0&&(s=i)};switch(e.key){case"Home":s=0;break;case"End":s=i;break;case"ArrowRight":"horizontal"===l&&(m?o():c());break;case"ArrowDown":"vertical"===l&&o();break;case"ArrowLeft":"horizontal"===l&&(m?c():o());break;case"ArrowUp":"vertical"===l&&c()}let d=s%n;r[d].ref.current?.focus()});return(0,t.jsx)(ed,{scope:a,disabled:s,direction:i,orientation:l,children:(0,t.jsx)(X.Slot,{scope:a,children:(0,t.jsx)(P.div,{...o,"data-orientation":l,ref:d,onKeyDown:s?void 0:f})})})}),ef="AccordionItem",[ep,eh]=ee(ef),ex=n.default.forwardRef((e,r)=>{let{__scopeAccordion:a,value:n,...s}=e,i=eu(ef,a),l=es(ef,a),o=er(a),c=(0,$.useId)(),d=n&&l.value.includes(n)||!1,u=i.disabled||e.disabled;return(0,t.jsx)(ep,{scope:a,open:d,disabled:u,triggerId:c,children:(0,t.jsx)(M,{"data-orientation":i.orientation,"data-state":eN(d),...o,...s,ref:r,disabled:u,open:d,onOpenChange:e=>{e?l.onItemOpen(n):l.onItemClose(n)}})})});ex.displayName=ef;var ev="AccordionHeader",ey=n.default.forwardRef((e,r)=>{let{__scopeAccordion:a,...n}=e,s=eu(Z,a),i=eh(ev,a);return(0,t.jsx)(P.h3,{"data-orientation":s.orientation,"data-state":eN(i.open),"data-disabled":i.disabled?"":void 0,...n,ref:r})});ey.displayName=ev;var eg="AccordionTrigger",eb=n.default.forwardRef((e,r)=>{let{__scopeAccordion:a,...n}=e,s=eu(Z,a),i=eh(eg,a),l=el(eg,a),o=er(a);return(0,t.jsx)(X.ItemSlot,{scope:a,children:(0,t.jsx)(U,{"aria-disabled":i.open&&!l.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...o,...n,ref:r})})});eb.displayName=eg;var ej="AccordionContent",ew=n.default.forwardRef((e,r)=>{let{__scopeAccordion:a,...n}=e,s=eu(Z,a),i=eh(ej,a),l=er(a);return(0,t.jsx)(B,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...l,...n,ref:r,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});function eN(e){return e?"open":"closed"}ew.displayName=ej;let eC=(0,N.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var e_=e.i(55552);function eR(e){let a,n,s=(0,r.c)(4);return s[0]!==e?({...a}=e,s[0]=e,s[1]=a):a=s[1],s[2]!==a?(n=(0,t.jsx)(ea,{"data-slot":"accordion",...a}),s[2]=a,s[3]=n):n=s[3],n}function ek(e){let a,n,s,i,l=(0,r.c)(8);return l[0]!==e?({className:a,...n}=e,l[0]=e,l[1]=a,l[2]=n):(a=l[1],n=l[2]),l[3]!==a?(s=(0,e_.cn)("border-b last:border-b-0",a),l[3]=a,l[4]=s):s=l[4],l[5]!==n||l[6]!==s?(i=(0,t.jsx)(ex,{"data-slot":"accordion-item",className:s,...n}),l[5]=n,l[6]=s,l[7]=i):i=l[7],i}function eS(e){let a,n,s,i,l,o,c=(0,r.c)(11);return c[0]!==e?({className:n,children:a,...s}=e,c[0]=e,c[1]=a,c[2]=n,c[3]=s):(a=c[1],n=c[2],s=c[3]),c[4]!==n?(i=(0,e_.cn)("focus-visible:border-ring focus-visible:ring-ring/50 flex flex-1 items-start justify-between gap-4 rounded-md py-4 text-left text-sm font-medium transition-all outline-none hover:underline focus-visible:ring-[3px] disabled:pointer-events-none disabled:opacity-50 [&[data-state=open]>svg]:rotate-180",n),c[4]=n,c[5]=i):i=c[5],c[6]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)(eC,{className:"text-muted-foreground pointer-events-none size-4 shrink-0 translate-y-0.5 transition-transform duration-200"}),c[6]=l):l=c[6],c[7]!==a||c[8]!==s||c[9]!==i?(o=(0,t.jsx)(ey,{className:"flex",children:(0,t.jsxs)(eb,{"data-slot":"accordion-trigger",className:i,...s,children:[a,l]})}),c[7]=a,c[8]=s,c[9]=i,c[10]=o):o=c[10],o}function eA(e){let a,n,s,i,l,o,c=(0,r.c)(12);return c[0]!==e?({className:n,children:a,...s}=e,c[0]=e,c[1]=a,c[2]=n,c[3]=s):(a=c[1],n=c[2],s=c[3]),c[4]!==n?(i=(0,e_.cn)("pt-0 pb-4",n),c[4]=n,c[5]=i):i=c[5],c[6]!==a||c[7]!==i?(l=(0,t.jsx)("div",{className:i,children:a}),c[6]=a,c[7]=i,c[8]=l):l=c[8],c[9]!==s||c[10]!==l?(o=(0,t.jsx)(ew,{"data-slot":"accordion-content",className:"data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down overflow-hidden text-sm",...s,children:l}),c[9]=s,c[10]=l,c[11]=o):o=c[11],o}var eI=e.i(67101);function eE(e,t=15){if(e.length<=t)return e;let r=Math.floor((t-3)/2),a=Math.ceil((t-3)/2);return`${e.slice(0,r)}...${e.slice(-a)}`}function eP(e){let a,i,l,o,d,u,m,f,p,h,x,v,y,g,b,N,_,R,k=(0,r.c)(47),{identities:S,host:A,onSelect:I,onCreateGuest:E,loading:P}=e,D=void 0!==P&&P,[T,$]=(0,n.useState)(0),[K,O]=(0,n.useState)(""),z=S[T];k[0]!==I||k[1]!==z?(a=()=>{z?I(z.idKey):O("Please select an identity to continue")},k[0]=I,k[1]=z,k[2]=a):a=k[2];let L=a;k[3]===Symbol.for("react.memo_cache_sentinel")?(i=e=>{$(e),O("")},k[3]=i):i=k[3];let F=i;if(0===S.length){let e,r,a;return k[4]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)("p",{className:"text-muted-foreground",children:"No identities found."}),k[4]=e):e=k[4],k[5]===Symbol.for("react.memo_cache_sentinel")?(r=(0,t.jsx)(C,{className:"h-4 w-4"}),k[5]=r):r=k[5],k[6]!==A||k[7]!==E?(a=(0,t.jsxs)("div",{className:"space-y-4 text-center",children:[e,(0,t.jsxs)(c.Button,{onClick:E,variant:"outline",className:"gap-2",children:[r,"Create Guest Identity for ",A]})]}),k[6]=A,k[7]=E,k[8]=a):a=k[8],a}k[9]===Symbol.for("react.memo_cache_sentinel")?(l=(0,t.jsx)("p",{className:"font-semibold text-sm",children:"Sign in as:"}),k[9]=l):l=k[9],k[10]===Symbol.for("react.memo_cache_sentinel")?(o=["var(--chart-1)","var(--chart-2)","var(--chart-3)","var(--chart-4)","var(--chart-5)"],k[10]=o):o=k[10],k[11]!==z.idKey?(d=(0,t.jsx)("div",{className:"h-12 w-12 overflow-hidden rounded-full ring-2 ring-primary/20",children:(0,t.jsx)(s.default,{colors:o,name:z.idKey,size:48,variant:"fractal"})}),k[11]=z.idKey,k[12]=d):d=k[12],k[13]!==z.name?(u=(0,t.jsx)("p",{className:"font-semibold text-sm",children:z.name}),k[13]=z.name,k[14]=u):u=k[14],k[15]!==z.idKey?(m=eE(z.idKey,15),k[15]=z.idKey,k[16]=m):m=k[16],k[17]!==m?(f=(0,t.jsx)("p",{className:"font-mono text-muted-foreground text-xs",children:m}),k[17]=m,k[18]=f):f=k[18],k[19]!==u||k[20]!==f?(p=(0,t.jsxs)("div",{className:"flex-1",children:[u,f]}),k[19]=u,k[20]=f,k[21]=p):p=k[21],k[22]===Symbol.for("react.memo_cache_sentinel")?(h=(0,t.jsx)(j.Check,{className:"h-5 w-5 text-primary"}),k[22]=h):h=k[22],k[23]!==p||k[24]!==d?(x=(0,t.jsxs)("div",{className:"space-y-3",children:[l,(0,t.jsx)("div",{className:"relative rounded-lg border-2 border-primary bg-primary/5 p-4 transition-all",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[d,p,h]})})]}),k[23]=p,k[24]=d,k[25]=x):x=k[25],k[26]!==S||k[27]!==D||k[28]!==T?(v=S.length>1&&(0,t.jsx)(eR,{className:"mt-2",collapsible:!0,type:"single",children:(0,t.jsxs)(ek,{className:"border-none",value:"other-identities",children:[(0,t.jsxs)(eS,{className:"py-2 text-muted-foreground text-sm hover:no-underline",children:["Use a different identity (",S.length-1," other",S.length-1>1?"s":"",")"]}),(0,t.jsx)(eA,{className:"space-y-2 pt-2 pb-2",children:S.map((e,r)=>r===T?null:(0,t.jsxs)("button",{className:"flex w-full items-center gap-3 rounded-lg border bg-card p-3 transition-all hover:border-primary/50 hover:bg-accent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",disabled:D,onClick:()=>F(r),type:"button",children:[(0,t.jsx)("div",{className:"h-10 w-10 overflow-hidden rounded-full ring-1 ring-border",children:(0,t.jsx)(s.default,{colors:["var(--chart-1)","var(--chart-2)","var(--chart-3)","var(--chart-4)","var(--chart-5)"],name:e.idKey,size:40,variant:"fractal"})}),(0,t.jsxs)("div",{className:"flex-1 text-left",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.name}),(0,t.jsx)("p",{className:"font-mono text-muted-foreground text-xs",children:eE(e.idKey,12)})]})]},e.idKey))})]})}),k[26]=S,k[27]=D,k[28]=T,k[29]=v):v=k[29],k[30]===Symbol.for("react.memo_cache_sentinel")?(y=(0,t.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-muted ring-1 ring-border",children:(0,t.jsx)(w.Plus,{className:"h-5 w-5 text-muted-foreground"})}),k[30]=y):y=k[30],k[31]===Symbol.for("react.memo_cache_sentinel")?(g=(0,t.jsxs)("div",{className:"flex-1 text-left",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:"Create guest identity for this site"}),(0,t.jsx)("p",{className:"text-muted-foreground text-xs",children:"Isolated, host-specific identity"})]}),k[31]=g):g=k[31],k[32]!==D||k[33]!==E?(b=(0,t.jsx)("div",{className:"border-t pt-4",children:(0,t.jsxs)("button",{className:"flex w-full items-center gap-3 rounded-lg border border-dashed bg-muted/30 p-3 transition-all hover:border-primary/50 hover:bg-accent focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring",disabled:D,onClick:E,type:"button",children:[y,g]})}),k[32]=D,k[33]=E,k[34]=b):b=k[34],k[35]!==K?(N=K&&(0,t.jsx)(eI.Alert,{variant:"destructive",children:(0,t.jsx)(eI.AlertDescription,{children:K})}),k[35]=K,k[36]=N):N=k[36];let M=D||!z,H=D?"Continuing...":`Continue as ${z?.name||"Unknown"}`;return k[37]!==L||k[38]!==M||k[39]!==H?(_=(0,t.jsx)(c.Button,{className:"w-full",disabled:M,onClick:L,size:"lg",type:"button",children:H}),k[37]=L,k[38]=M,k[39]=H,k[40]=_):_=k[40],k[41]!==x||k[42]!==v||k[43]!==b||k[44]!==N||k[45]!==_?(R=(0,t.jsxs)("div",{className:"space-y-4",children:[x,v,b,N,_]}),k[41]=x,k[42]=v,k[43]=b,k[44]=N,k[45]=_,k[46]=R):R=k[46],R}function eD(){let e=(0,a.useSearchParams)(),[r,i]=(0,n.useState)("loading"),[l,o]=(0,n.useState)([]),[c,u]=(0,n.useState)(null),[m,f]=(0,n.useState)(!1),p=e.get("host")||"unknown",v=e.get("icon")||void 0,y=e.get("scopes")||"",j=y?y.split(",").filter(Boolean):[],w=e.get("returnURL")||void 0,N=(0,n.useCallback)(async()=>{i("loading");let e=await (0,h.getStatus)();if("no_wallet"===e.status)i("no_wallet");else if("locked"===e.status)i("locked");else{let e=(await (0,h.getIdentities)()).identities||[];o(e),1===e.length?(u(e[0].idKey),i("authorize")):i("selectIdentity")}},[]);(0,n.useEffect)(()=>{N()},[N]);let C=async()=>{f(!0);try{let e=await fetch("/api/identity/guest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({host:p})});if(!e.ok)throw Error("Failed to create guest identity");let t=await e.json();if(t.success&&t.idKey){let e={idKey:t.idKey,name:t.name,rootAddress:t.rootAddress,counter:t.counter};o(t=>[...t,e]),u(t.idKey),i("authorize")}}catch(e){console.error("Failed to create guest identity:",e)}finally{f(!1)}};return"loading"===r?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"animate-pulse",children:(0,t.jsx)("div",{className:"h-16 w-16 mx-auto rounded-full bg-muted"})}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading TokenPass..."})]})}):"no_wallet"===r?(0,t.jsx)(b.Register,{onSuccess:N}):"locked"===r?(0,t.jsx)(g.Login,{onSuccess:N}):"selectIdentity"===r?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4",children:(0,t.jsxs)(d.Card,{className:"w-full max-w-md",children:[(0,t.jsx)(d.CardHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[v?(0,t.jsx)("img",{alt:p,className:"h-12 w-12 rounded-lg ring-2 ring-border",src:v}):(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-muted ring-2 ring-border",children:(0,t.jsx)(s.default,{colors:["var(--chart-1)","var(--chart-2)","var(--chart-3)","var(--chart-4)","var(--chart-5)"],name:p,size:48,variant:"fractal"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)(d.CardTitle,{className:"text-lg",children:p}),(0,t.jsx)(d.CardDescription,{children:"wants to access your account"})]})]})}),(0,t.jsxs)(d.CardContent,{className:"space-y-6",children:[(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"Select which identity to use with this application."}),(0,t.jsx)(eP,{identities:l,host:p,onSelect:e=>{u(e),i("authorize")},onCreateGuest:C,loading:m})]})]})}):(0,t.jsx)(x,{host:p,icon:v,scopes:j,returnURL:w,selectedIdentityKey:c})}function eT(){let e,a=(0,r.c)(1);return a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,t.jsx)(n.Suspense,{fallback:(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center space-y-4",children:[(0,t.jsx)("div",{className:"animate-pulse",children:(0,t.jsx)("div",{className:"h-16 w-16 mx-auto rounded-full bg-muted"})}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading TokenPass..."})]})}),children:(0,t.jsx)(eD,{})}),a[0]=e):e=a[0],e}e.s(["default",()=>eT],1015)}]);